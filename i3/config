###########################################
#             GENERAL SETTINGS            #
###########################################
set $bg-color #21252b
set $configpath ~/.config/i3
set $scriptpath $configpath/scripts
font                pango:Open Sans 10 9
set $mod            Mod4
floating_modifier   $mod
client.focused      $bg-color $bg-color #ffffff $bg-color   $bg-color

# mousepad natural scrolling and horizontal scrolling
exec_always xinput set-prop 13 290 -111 -111
exec_always xinput set-prop 13 292 1 1
exec_always xinput set-prop 14 290 -111 -111
exec_always xinput set-prop 14 292 1 1

# clone monitor
exec_always xrandr --output DP-1 --mode 1920x1080 --output eDP-1 --primary --scale-from 1920x1080

# compton & download_watcher
exec_always compton --config $configpath/compton.conf
exec_always feh --bg-fill ~/Pictures/Bakgrunnsbilder/Danmark.jpg
exec_always bash $scriptpath/download_watcher.sh

# i3 reload/restart/quit + lock & bar settings
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+q exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"
bindsym $mod+Escape exec bash $scriptpath/lock.sh

bar {
  status_command SCRIPT_DIR=~/.config/i3/scripts i3blocks -c ~/.config/i3/i3blocks.conf
  tray_output primary
  colors {
    background $bg-color
    statusline #ffffff
    separator #666666

    focused_workspace  #56b6c2 $bg-color #56b6c2
    active_workspace   #c678dd $bg-color #c678dd
    inactive_workspace #333333 #222222 #888888
    urgent_workspace   #2f343a #900000 #ffffff
    binding_mode       #2f343a #900000 #ffffff
  }
  separator_symbol " "
}

###########################################
#             FUNCTION KEYS               #
###########################################
# exec_always gksu chown franz /sys/class/backlight/intel_backlight/brightness
# exec_always gksu chown franz /sys/class/leds/asus::kbd_backlight/brightness
exec echo 900 > /sys/class/backlight/intel_backlight/brightness

#audio
bindsym XF86AudioRaiseVolume exec amixer -D pulse sset Master 10%+
bindsym XF86AudioLowerVolume exec amixer -D pulse sset Master 10%-
bindsym XF86AudioMute        exec amixer -D pulse sset Master 0%

#screen brightness
bindsym XF86MonBrightnessUp     exec echo $(($(cat /sys/class/backlight/intel_backlight/brightness) + 25)) > /sys/class/backlight/intel_backlight/brightness
bindsym XF86MonBrightnessDown   exec echo $(($(cat /sys/class/backlight/intel_backlight/brightness) - 25)) > /sys/class/backlight/intel_backlight/brightness

#keyboard backlight
bindsym XF86KbdBrightnessUp     exec echo $(($(cat /sys/class/leds/asus::kbd_backlight/brightness) + 1))    > /sys/class/leds/asus::kbd_backlight/brightness
bindsym XF86KbdBrightnessDown   exec echo $(($(cat /sys/class/leds/asus::kbd_backlight/brightness) - 1))    > /sys/class/leds/asus::kbd_backlight/brightness

#bindsym XF86TouchpadToggle exec /some/path/toggletouchpad.sh # toggle touchpad

###########################################
#              APP SHORTCUTS              #
###########################################
bindsym $mod+space   exec rofi -show run -lines 3 -eh 2 -width 100 -padding 480 -opacity "85" -bw 0 -bc "$bg-color" -bg "$bg-color" -fg "$text-color" -hlbg "$bg-color" -hlfg "#9575cd"
bindsym $mod+Return  exec "i3-sensible-terminal"
bindsym $mod+c       exec "chromium-browser"
bindsym $mod+s       exec "slack"
bindsym $mod+t       exec "notes-up"
bindsym $mod+comma   exec "gnome-control-center"
bindsym $mod+h       exec "pantheon-files"
bindsym $mod+d       exec "pantheon-files Downloads"
# screenshots
bindsym Print        exec "shutter -s"
bindsym $mod+Print   exec "shutter -w"

###########################################
#            WINDOW MODIFIERS             #
###########################################
bindsym $mod+x            kill

# focus
#bindsym $mod+Alt+Left     focus left
#bindsym $mod+Alt+Right    focus right

# move
bindsym $mod+Shift+Left   move left
bindsym $mod+Shift+Down   move down
bindsym $mod+Shift+Up     move up
bindsym $mod+Shift+Right  move right

bindsym $mod+Up            fullscreen toggle

# resize
bindsym $mod+r mode "resize"
mode "resize" {
        bindsym Left    resize shrink width 10 px or 10 ppt
        bindsym Down    resize grow height 10 px or 10 ppt
        bindsym Up      resize shrink height 10 px or 10 ppt
        bindsym Right   resize grow width 10 px or 10 ppt
        bindsym Return  mode "default"
        bindsym Escape  mode "default"
}

###########################################
#               WORKSPACES                #
###########################################
# determine screen workspaces
workspace 1 output DP-1
workspace 2 output DP-1
workspace 3 output DP-1
workspace 4 output eDP-1

bindsym $mod+Left       workspace prev
bindsym $mod+Right      workspace next

# move containers
bindsym $mod+1          move container to workspace 1
bindsym $mod+2          move container to workspace 2
bindsym $mod+3          move container to workspace 3
bindsym $mod+4          move container to workspace 4
bindsym $mod+Ctrl+Right move container to workspace next;workspace next
bindsym $mod+Ctrl+Left  move container to workspace prev;workspace prev

# change container layout
bindsym $mod+e        layout tabbed
bindsym $mod+w        layout toggle split
bindsym $mod+Shift+t  floating toggle

# assignments
assign [instance="chromium-browser"] 1
assign [instance="atom"] 2
assign [instance="pantheon-terminal"] 3
assign [instance="slack"] 4
for_window [instance="spotify"] move to workspace 4
